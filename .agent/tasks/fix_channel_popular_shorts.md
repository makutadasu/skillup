# チャンネル監視機能: 人気動画ショート除外対応

## 概要
「人気の動画」機能において、Shorts動画（60秒未満）が混在する問題を解消しました。

## 変更内容
`src/lib/youtube.ts` の `getChannelVideos` 関数を修正しました。

### 変更前
- YouTube Search APIで `order=viewCount, type=video` で上位10件を取得。
- Shortsも通常の動画として含まれていました。

### 変更後
1. **取得数増加**: Search APIで上位**50件**（API上限）を取得するように変更。
2. **詳細情報の取得**: 取得した50件のIDを使って、再度 `videos.list` (part=contentDetails) を呼び出し、動画の長さを取得。
3. **フィルタリング**: 動画の長さ（ISO 8601形式）を解析。
   - `PT59S` のように、時間(H)や分(M)が含まれない（＝秒数のみの）動画をShortsと判定し、リストから除外。
   - 分（M）や時間（H）が含まれる動画（1分以上）のみを残す。
   - ※ `PT1M00S` も1分以上なので残ります。
4. **選定**: フィルタリング後のリストから上位10件を返却。

これにより、人気のShorts動画が除外され、人気の**長尺動画**（1分以上）のみがトップ10として表示されるようになります。

## 今後の課題（必要に応じて）
- さらに厳密にShortsを除外する場合、YouTube APIのvideoカテゴリや、OEmbedのwidth/height比率を確認する方法もありますが、APIコストとレスポンス速度の観点から、現状の「時間によるフィルタリング」が最も効率的です。
